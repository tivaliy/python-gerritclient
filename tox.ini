[tox]
skipsdist = True
envlist = py311,py312,py313,lint,format-check,docs

[testenv]
usedevelop = True
allowlist_externals = bash
                      python
setenv = VIRTUAL_ENV={envdir}
         OS_STDOUT_CAPTURE=1
         OS_STDERR_CAPTURE=1
         OS_LOG_CAPTURE=1
         OS_TEST_TIMEOUT=160
deps =
    cliff>=4.0.0
    requests>=2.28.0
    PyYAML>=6.0
    fixtures>=4.0.0
    oslotest>=5.0.0
    testtools>=2.5.0
    stestr
commands =
    stestr run --serial {posargs}

[testenv:lint]
deps = ruff>=0.14.0
commands =
    ruff check {posargs:gerritclient}

[testenv:format]
deps = ruff>=0.14.0
commands =
    ruff format {posargs:gerritclient}

[testenv:format-check]
deps = ruff>=0.14.0
commands =
    ruff format --check {posargs:gerritclient}

[testenv:docs]
deps =
    sphinx>=1.6.2
    sphinx_rtd_theme
commands =
    sphinx-build -W -b html docs/source docs/build/html
