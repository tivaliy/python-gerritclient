[tox]
skipsdist = True
envlist = py311,py312,py313,lint,format-check,docs

[testenv]
usedevelop = True
allowlist_externals = bash
                      python
setenv = VIRTUAL_ENV={envdir}
deps =
    cliff>=4.0.0
    requests>=2.28.0
    PyYAML>=6.0
    pydantic-settings>=2.0
    pytest>=8.0.0
    pytest-cov>=4.1.0
commands =
    pytest {posargs:gerritclient/tests}

[testenv:lint]
deps = ruff>=0.14.0
commands =
    ruff check {posargs:gerritclient}

[testenv:format]
deps = ruff>=0.14.0
commands =
    ruff format {posargs:gerritclient}

[testenv:format-check]
deps = ruff>=0.14.0
commands =
    ruff format --check {posargs:gerritclient}

[testenv:docs]
deps =
    sphinx>=1.6.2
    sphinx_rtd_theme
commands =
    sphinx-build -W -b html docs/source docs/build/html
